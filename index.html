<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>fastrerandomize - Fast Rerandomization Using Accelerated Computing</title>
  
  <!-- Google Fonts: Manrope for headings, Inter for body text -->
  <link rel="preconnect" href="https://fonts.gstatic.com"/>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
  
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>

  <style>
    :root {
      /* Color System */
      --color-primary: #3B82F6;
      --color-primary-dark: #1D4ED8;
      --color-primary-light: #60A5FA;
      --color-secondary: #10B981;
      --color-accent: #8B5CF6;
      --color-dark: #1E293B;
      --color-darker: #0F172A;
      --color-light: #F3F4F6;
      --color-lighter: #F9FAFB;
      
      /* Spacing System */
      --space-xs: 0.25rem;
      --space-sm: 0.5rem;
      --space-md: 1rem;
      --space-lg: 1.5rem;
      --space-xl: 2rem;
      --space-xxl: 3rem;
      
      /* Shadow System */
      --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --shadow-card: 0 4px 20px rgba(0, 0, 0, 0.08);
      
      /* Border Radius */
      --radius-sm: 0.25rem;
      --radius-md: 0.5rem;
      --radius-lg: 0.75rem;
      --radius-xl: 1rem;
      
      /* Transitions */
      --transition-fast: 150ms ease;
      --transition-normal: 300ms ease;
      --transition-slow: 500ms ease;
    }

    /* 
      Base Styles
      -----------
    */
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", 
                  "Roboto", "Helvetica Neue", Arial, sans-serif;
      color: #111827;
      line-height: 1.7;
      background: transparent;
      scroll-behavior: smooth;
    }
    
    #background-canvas {
      position: fixed;
      top: 0;
      left: 0;
      z-index: -999;
      width: 100%;
      height: 100%;
      display: block;
      background: linear-gradient(135deg, var(--color-darker) 0%, var(--color-dark) 100%);
    }

    a {
      text-decoration: none;
      color: inherit;
      transition: color var(--transition-fast);
    }
    
    h1, h2, h3, h4, h5, h6 {
      font-family: 'Manrope', sans-serif;
      font-weight: 700;
      line-height: 1.3;
      margin-top: 0;
    }
    
    .highlight {
      color: var(--color-primary);
      position: relative;
      display: inline-block;
    }
    
    .highlight::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 6px;
      background-color: rgba(59, 130, 246, 0.2);
      border-radius: var(--radius-sm);
      z-index: -1;
    }
    
    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 var(--space-md);
    }
    
    .badge {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 50px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .badge-primary {
      background-color: rgba(59, 130, 246, 0.15);
      color: var(--color-primary);
    }
    
    .badge-secondary {
      background-color: rgba(16, 185, 129, 0.15);
      color: var(--color-secondary);
    }
    
    .badge-accent {
      background-color: rgba(139, 92, 246, 0.15);
      color: var(--color-accent);
    }
    
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.75rem 1.5rem;
      font-weight: 600;
      border: none;
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all var(--transition-normal);
    }
    
    .btn-primary {
      background-color: var(--color-primary);
      color: white;
      box-shadow: 0 4px 6px rgba(59, 130, 246, 0.25);
    }
    
    .btn-primary:hover {
      background-color: var(--color-primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 6px 8px rgba(59, 130, 246, 0.3);
    }
    
    .btn-secondary {
      background-color: white;
      color: var(--color-dark);
      border: 1px solid #E5E7EB;
    }
    
    .btn-secondary:hover {
      background-color: var(--color-light);
      transform: translateY(-2px);
    }
    
    .btn-lg {
      padding: 0.875rem 2rem;
      font-size: 1.125rem;
    }
    
    /* 
      Header + Navigation 
      --------------------
    */
    header {
      background: linear-gradient(135deg, var(--color-dark) 0%, var(--color-primary-dark) 100%);
      color: #FFF;
      position: sticky;
      top: 0;
      z-index: 999;
      box-shadow: var(--shadow-md);
    }
    
    nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      max-width: 1200px;
      margin: 0 auto;
      padding: 1rem;
      position: relative;
    }
    
    .logo {
      font-family: 'Manrope', sans-serif;
      font-size: 1.4rem;
      font-weight: 800;
      letter-spacing: -0.5px;
      transition: all var(--transition-normal);
    }
    
    .logo:hover {
      transform: scale(1.05);
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
    }
    
    nav ul {
      list-style-type: none;
      display: flex;
      gap: 1.25rem;
      margin: 0;
      padding: 0;
    }
    
    nav ul li {
      position: relative;
    }
    
    nav ul li a {
      font-weight: 500;
      font-size: 0.95rem;
      padding: 0.5rem 0.75rem;
      border-radius: var(--radius-md);
      transition: all var(--transition-normal);
      position: relative;
    }
    
    nav ul li a::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 2px;
      background-color: white;
      transition: width var(--transition-normal);
    }
    
    nav ul li a:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }
    
    nav ul li a:hover::after {
      width: 80%;
    }
    
    /* Search Container Styling */
    .search-container {
      position: relative;
      margin-left: var(--space-md);
    }

    .search-container form {
      margin: 0;
      padding: 0;
      display: flex;
      align-items: center;
    }

    .search-input {
      background-color: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: white;
      padding: 0.5rem 0.75rem 0.5rem 2.25rem;
      border-radius: var(--radius-md);
      font-size: 0.875rem;
      transition: all var(--transition-normal);
      width: 150px;
    }

    .search-input:focus {
      outline: none;
      background-color: rgba(255, 255, 255, 0.15);
      border-color: rgba(255, 255, 255, 0.3);
      width: 200px;
    }

    .search-icon {
      position: absolute;
      left: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      color: rgba(255, 255, 255, 0.7);
      font-size: 0.875rem;
      pointer-events: none;
    }

    /* Search Results Styling */
    .search-results {
      position: absolute;
      top: 100%;
      right: 0;
      width: 300px;
      max-height: 400px;
      overflow-y: auto;
      background-color: var(--color-dark);
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-lg);
      z-index: 1000;
      margin-top: 0.5rem;
      border: 1px solid rgba(255, 255, 255, 0.1);
      display: none;
      padding: 0.5rem 0;
      scroll-behavior: smooth;
    }

    .search-result-item {
      display: block;
      padding: 0.75rem 1rem;
      color: white;
      text-decoration: none;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      transition: background-color var(--transition-normal);
    }

    .search-result-item:last-child {
      border-bottom: none;
    }

    .search-result-item:hover,
    .search-result-item:focus {
      background-color: rgba(255, 255, 255, 0.1);
      outline: none;
    }

    .search-result-item:focus-visible {
      box-shadow: 0 0 0 2px var(--color-primary) inset;
    }

    /* Handle small screens */
    @media (max-width: 992px) {
      .search-results {
        width: 100%;
        left: 0;
        right: auto;
      }
    }
    
    /* Hamburger lines default hidden on large screens */
    .menu-toggle {
      display: none;
      background: none;
      border: none;
      cursor: pointer;
    }
    
    .hamburger-line {
      display: block;
      width: 25px;
      height: 3px;
      background-color: #fff;
      margin: 5px 0;
      transition: 0.3s ease;
    }

    /* Show/hide logic on narrow screens */
    @media (max-width: 992px) {
      .search-container {
        display: none;
      }
    }
    
    @media (max-width: 768px) {
      nav {
        position: relative;
      }
      
      /* Show the hamburger button */
      .menu-toggle {
        display: inline-block;
      }

      /* Hide the menu by default on mobile */
      nav ul {
        display: none;
        position: absolute;
        top: 100%;
        right: 0;
        background-color: #1E293B; /* Completely opaque background, no transparency */
        border: 1px solid rgba(255, 255, 255, 0.1);
        flex-direction: column;
        gap: 0;
        width: 220px;
        border-radius: var(--radius-md);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3); /* Stronger shadow */
        overflow: hidden;
        transform: translateY(10px);
        opacity: 0;
        transition: all var(--transition-normal);
      }

      /* Each nav item is full-width on mobile */
      nav ul li a {
        display: block;
        padding: 0.75rem 1.25rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        color: white;
        font-weight: 600;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
      }
      
      nav ul li a::after {
        display: none;
      }
      
      /* When nav has .open, reveal the menu */
      nav.open ul {
        display: flex;
        transform: translateY(0);
        opacity: 1;
        z-index: 1000; /* Ensure menu is above other elements */
      }
    }

    /*
      Hero Section
      ------------
    */
    .hero {
      text-align: center;
      padding: 4rem 1rem 5rem;
      background: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.7));
      position: relative;
      margin-top: 0;
    }
    
    .hero-content {
      max-width: 800px;
      margin: 0 auto;
      position: relative;
      z-index: 2;
    }
    
    .hero h1 {
      font-size: 3.25rem;
      margin-bottom: 0.75rem;
      font-weight: 800;
      letter-spacing: -1px;
      background: linear-gradient(135deg, #fff 0%, #a5c4fd 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .hero p {
      font-size: 1.25rem;
      font-weight: 400;
      margin-bottom: 1.5rem;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
      color: rgba(255, 255, 255, 0.9);
    }
    
    .hero-stats {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 2rem;
      margin-top: var(--space-lg);
      margin-bottom: var(--space-lg);
    }
    
    .stat-item {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    .stat-value {
      font-family: 'Manrope', sans-serif;
      font-size: 2.5rem;
      font-weight: 800;
      color: var(--color-primary-light);
      line-height: 1;
    }
    
    .stat-label {
      font-size: 0.85rem;
      font-weight: 500;
      color: rgba(255, 255, 255, 0.7);
      margin-top: var(--space-xs);
    }
    
    .hero-buttons {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin-top: var(--space-xl);
    }
    
    .hero-canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0.15;
    }
    
    @media (max-width: 768px) {
      .hero h1 {
        font-size: 2.25rem;
      }
      
      .hero p {
        font-size: 1rem;
      }
      
      .hero-stats {
        gap: 1rem;
      }
      
      .stat-value {
        font-size: 1.75rem;
      }
      
      .hero-buttons {
        flex-direction: column;
        align-items: center;
        gap: 0.75rem;
      }
    }

    /*
      Main Content
      ------------
    */
    main {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem 1rem;
      position: relative;
      z-index: 2;
    }

    /* Release Announcement Section */
    .release-announcement {
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.04) 0%, rgba(255, 255, 255, 0.01) 100%);
      border: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: var(--radius-lg);
      padding: 2rem;
      margin: 0 auto 3rem;
      max-width: 800px;
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow-card);
      transform: translateY(-50px);
      position: relative;
      overflow: hidden;
    }
    
    .release-announcement::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, var(--color-primary) 0%, var(--color-accent) 100%);
    }
    
    .release-announcement h2 {
      margin-bottom: 1rem;
      font-size: 1.75rem;
      font-weight: 700;
      color: white;
      position: relative;
    }
    
    .release-announcement p {
      margin-bottom: 0.75rem;
      color: rgba(255, 255, 255, 0.9);
      font-size: 1.1rem;
    }
    
    .release-announcement a {
      color: var(--color-primary-light);
      font-weight: 500;
      transition: color var(--transition-normal);
      position: relative;
    }
    
    .release-announcement a::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 100%;
      height: 1px;
      background-color: var(--color-primary-light);
      transform: scaleX(0);
      transform-origin: right center;
      transition: transform var(--transition-normal);
    }
    
    .release-announcement a:hover {
      color: var(--color-primary);
    }
    
    .release-announcement a:hover::after {
      transform: scaleX(1);
      transform-origin: left center;
    }

    /* Features Section */
    .features-title {
      text-align: center;
      margin-bottom: 3rem;
      color: white;
    }
    
    .features-title h2 {
      font-size: 2.25rem;
      margin-bottom: 1rem;
    }
    
    .features-title p {
      font-size: 1.125rem;
      max-width: 600px;
      margin: 0 auto;
      color: rgba(255, 255, 255, 0.8);
    }
    
    .features {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin-bottom: 3rem;
    }
    
    .feature {
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%);
      border: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: var(--radius-lg);
      padding: 2rem;
      transition: all var(--transition-normal);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow-card);
      position: relative;
      overflow: hidden;
    }
    
    .feature::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, var(--color-primary) 0%, var(--color-accent) 50%, var(--color-secondary) 100%);
      opacity: 0;
      transition: opacity var(--transition-normal);
    }
    
    .feature:hover {
      transform: translateY(-10px);
      box-shadow: var(--shadow-lg);
    }
    
    .feature:hover::before {
      opacity: 1;
    }
    
    .feature-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(29, 78, 216, 0.2) 100%);
      margin-bottom: 1.25rem;
      font-size: 1.5rem;
      color: var(--color-primary-light);
    }
    
    .feature:nth-child(2n) .feature-icon {
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(5, 150, 105, 0.2) 100%);
      color: var(--color-secondary);
    }
    
    .feature:nth-child(3n) .feature-icon {
      background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(124, 58, 237, 0.2) 100%);
      color: var(--color-accent);
    }
    
    .feature h3 {
      margin-bottom: 0.75rem;
      font-weight: 700;
      font-size: 1.25rem;
      color: white;
    }
    
    .feature p {
      font-weight: 400;
      color: rgba(255, 255, 255, 0.8);
      line-height: 1.7;
      margin-bottom: 1.25rem;
    }
    
    .feature a {
      display: inline-flex;
      align-items: center;
      gap: 0.375rem;
      color: var(--color-primary-light);
      font-weight: 500;
      font-size: 0.95rem;
    }
    
    .feature a:hover {
      color: white;
    }
    
    /* Usage Example Section */
    .usage-example {
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.01) 100%);
      border: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: var(--radius-lg);
      padding: 2rem;
      margin-bottom: 3rem;
      overflow: hidden;
      backdrop-filter: blur(10px);
    }
    
    .usage-example h3 {
      color: white;
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
    }
    
    .code-tabs {
      display: flex;
      gap: 1px;
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: var(--radius-md) var(--radius-md) 0 0;
      margin-bottom: 0;
      overflow: hidden;
    }
    
    .code-tab {
      padding: 0.75rem 1.25rem;
      background-color: rgba(0, 0, 0, 0.3);
      color: rgba(255, 255, 255, 0.7);
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      border: none;
      transition: all var(--transition-normal);
      flex: 1;
      text-align: center;
    }
    
    .code-tab.active {
      background-color: #1E1E1E;
      color: white;
    }
    
    .code-block {
      background-color: #1E1E1E;
      border-radius: 0 0 var(--radius-md) var(--radius-md);
      overflow: hidden;
      display: none;
    }
    
    .code-block.active {
      display: block;
    }
    
    .code-content {
      padding: 1.5rem;
      font-family: 'Consolas', 'Monaco', 'Andale Mono', monospace;
      font-size: 0.9rem;
      line-height: 1.6;
      color: #D4D4D4;
      overflow-x: auto;
      white-space: pre;
    }
    
    .code-keyword {
      color: #569CD6;
    }
    
    .code-function {
      color: #DCDCAA;
    }
    
    .code-string {
      color: #CE9178;
    }
    
    .code-comment {
      color: #6A9955;
    }
    
    .code-number {
      color: #B5CEA8;
    }

    /* Prior Work */
    .prior-work {
      margin-top: 2rem;
      padding: 2rem;
      border-radius: var(--radius-lg);
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.03) 0%, rgba(255, 255, 255, 0.01) 100%);
      border: 1px solid rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
    }
    
    .prior-work h3 {
      color: white;
      margin-bottom: 1rem;
    }
    
    .prior-work p {
      color: rgba(255, 255, 255, 0.9);
    }
    
    .prior-work a {
      color: var(--color-primary-light);
      font-weight: 500;
      position: relative;
    }
    
    .prior-work a::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 100%;
      height: 1px;
      background-color: var(--color-primary-light);
      transform: scaleX(0);
      transform-origin: right center;
      transition: transform var(--transition-normal);
    }
    
    .prior-work a:hover::after {
      transform: scaleX(1);
      transform-origin: left center;
    }

    /* Share Button Styles */
    .share-container {
      text-align: center;
      margin: 2rem 0;
    }
    
    #share-button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.75rem 1.25rem;
      font-size: 0.95rem;
      font-weight: 600;
      color: white;
      background-color: var(--color-dark);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all var(--transition-normal);
    }
    
    #share-button:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }
    
    #share-button svg {
      transition: transform var(--transition-normal);
    }
    
    #share-button:hover svg {
      transform: rotate(15deg);
    }

    /* Demo Section */
    .demo-section {
      margin-top: 3rem;
      text-align: center;
    }
    
    .demo-section h2 {
      color: white;
      margin-bottom: 1.5rem;
      font-size: 1.75rem;
    }
    
    .demo-frame {
      width: 100%;
      border-radius: var(--radius-lg);
      overflow: hidden;
      box-shadow: var(--shadow-lg);
      border: 1px solid rgba(255, 255, 255, 0.05);
      background-color: rgba(255, 255, 255, 0.02);
      transition: transform var(--transition-normal);
      transform: scale(0.98);
    }
    
    .demo-frame:hover {
      transform: scale(1);
    }

    /*
      Footer
      ------
    */
    footer {
      background: linear-gradient(to top, var(--color-darker) 0%, transparent 100%);
      color: rgba(255, 255, 255, 0.8);
      text-align: center;
      padding: 3rem 1rem;
      margin-top: 3rem;
      position: relative;
    }
    
    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 2rem;
      text-align: left;
    }
    
    .footer-column h4 {
      color: white;
      margin-bottom: 1rem;
      font-size: 1.1rem;
    }
    
    .footer-links {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    
    .footer-links li {
      margin-bottom: 0.75rem;
    }
    
    .footer-links a {
      color: rgba(255, 255, 255, 0.6);
      transition: color var(--transition-normal);
      font-size: 0.9rem;
    }
    
    .footer-links a:hover {
      color: white;
    }
    
    .footer-bottom {
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      margin-top: 2rem;
      padding-top: 2rem;
      text-align: center;
      color: rgba(255, 255, 255, 0.6);
      font-size: 0.9rem;
    }
    
    @media (max-width: 768px) {
      .footer-content {
        grid-template-columns: 1fr;
        text-align: center;
      }
      
      .footer-column {
        margin-bottom: 1.5rem;
      }
    }

    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    .animate-fade-in {
      animation: fadeIn 1s ease-out forwards;
    }
    
    .animate-pulse {
      animation: pulse 2s infinite ease-in-out;
    }
    
    /* Delay classes for staggered animations */
    .delay-100 { animation-delay: 100ms; }
    .delay-200 { animation-delay: 200ms; }
    .delay-300 { animation-delay: 300ms; }
    .delay-400 { animation-delay: 400ms; }
    .delay-500 { animation-delay: 500ms; }


/* Ensure canvas visibility throughout */
#background-canvas {
  z-index: -1;
}

main, footer, header, section {
  background-color: transparent;
  position: relative;
  z-index: 1;
}

/* Adjust specific element backgrounds for transparency */
.feature, 
.usage-example, 
.release-announcement, 
.prior-work, 
.demo-section {
  background: rgba(255,255,255,0.02);
  backdrop-filter: blur(10px);
}

@keyframes shine-bg {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

@keyframes glow {
  0% { box-shadow: 0 0 5px rgba(255, 215, 0, 0.5); }
  50% { box-shadow: 0 0 20px rgba(255, 165, 0, 0.8); }
  100% { box-shadow: 0 0 5px rgba(255, 215, 0, 0.5); }
}

.highlight {
  background: linear-gradient(90deg, #ffd700, #ff8c00, #ff4500, #ffa500, #ffd700);
  background-size: 400% 100%;
  animation: 
    shine-bg 3s infinite ease-in-out,
    pulse 2s infinite ease-in-out,
    glow 3s infinite ease-in-out;
  padding: 2px 10px;
  border-radius: 6px;
  text-shadow: 0 1px 2px rgba(0,0,0,0.3);
  font-weight: bold;
  display: inline-block;
  position: relative;
  color: #fff;
  letter-spacing: 0.5px;
  border: 1px solid rgba(255, 165, 0, 0.3);
  transition: all 0.3s ease;
}

.highlight:hover {
  transform: translateY(-2px) scale(1.05);
  text-shadow: 0 2px 4px rgba(0,0,0,0.4);
}

.highlight::before {
  content: '';
  position: absolute;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  border-radius: 8px;
  background: linear-gradient(45deg, #ffd700, transparent, #ffa500, transparent, #ffd700);
  background-size: 400% 400%;
  z-index: -1;
  animation: shine-bg 5s infinite linear;
  opacity: 0.6;
}
  </style>
</head>

<body>
  <!-- Raining Vectors Background Canvas -->
  <canvas id="background-canvas"></canvas>
  
  <!-- Header + Navigation -->
  <header>
    <nav>
      <div class="logo">
        <a href="index.html">fastrerandomize</a>
      </div>

      <!-- HAMBURGER BUTTON -->
      <button class="menu-toggle" aria-label="Toggle Menu">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>
      <!-- /HAMBURGER BUTTON -->

      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="install.html">Install</a></li>
        <li><a href="https://github.com/cjerzak/fastrerandomize-software/blob/main/fastrerandomize.pdf?raw=true">Documentation</a></li>
        <li><a href="tutorials.html">Tutorials</a></li>
        <li><a href="aboutus.html">About Us</a></li>
      </ul>
      
     <!-- Update the search container in your HTML -->
    <div class="search-container">
      <form onsubmit="return false;">
      <i class="fas fa-search search-icon"></i>
      <input type="text" class="search-input" placeholder="Search docs..." aria-label="Search documentation">
      </form>
      <!-- The search results will be automatically inserted by JavaScript -->
    </div>

    </nav>
    
    <!-- Hero Section -->
    <div class="hero">
      <canvas id="hero-canvas" class="hero-canvas"></canvas>
      <div class="hero-content">
        <h1 class="animate-fade-in">fastrerandomize</h1>
        <p class="animate-fade-in delay-100">An R Package for <span class="highlight">Fast Rerandomization</span> Using Accelerated Computing</p>
        
        <div class="hero-stats animate-fade-in delay-200">
          <div class="stat-item">
            <div class="stat-value">>50x</div>
            <div class="stat-label">Faster Processing</div>
          </div>
          <div class="stat-item">
            <div class="stat-value">100k+</div>
            <div class="stat-label">Max Sample Size</div>
          </div>
          <div class="stat-item">
            <div class="stat-value">GPU</div>
            <div class="stat-label">Acceleration</div>
          </div>
        </div>
        
        <div class="hero-buttons animate-fade-in delay-300">
          <a href="https://cran.rstudio.com/web/packages/fastrerandomize/index.html" class="btn btn-primary btn-lg">
            <i class="fas fa-download"></i> Get Started: v1.0
          </a>
          <a href="https://github.com/cjerzak/fastrerandomize-software" class="btn btn-secondary">
            <i class="fab fa-github"></i> View on GitHub
          </a>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main>
    <!-- Release Announcement -->
    <section class="release-announcement animate-fade-in">
      <h2>fastrerandomize <span class="badge badge-primary">Released!</span></h2>
      <p>
        Our new R package leverages GPU acceleration and parallel processing to make rerandomization 
        feasible for large-scale experiments with complex balance requirements.
      </p>
      <p>Read the accompanying package paper <a href="https://arxiv.org/abs/2501.07642">here</a>.</p>
    </section>

    <!-- Features Section -->
    <div class="features-title">
      <h2>Features</h2>
      <p>Designed to make rerandomization accessible for experimental
    designs at any and all scales.</p>
    </div>
    
    <section class="features">
      <div class="feature animate-fade-in">
        <div class="feature-icon">
          <i class="fas fa-bolt"></i>
        </div>
        <h3>Accelerated Computation</h3>
        <p>Employs batched processing, autovectorization, just-in-time-compilation, and (optionally) GPU acceleration to dramatically improve performance (>50x compared to traditional methods).</p>
        <a href="documentation.html">Learn more <i class="fas fa-arrow-right"></i></a>
      </div>
      
      <div class="feature animate-fade-in delay-100">
        <div class="feature-icon">
          <i class="fas fa-chart-bar"></i>
        </div>
        <h3>Scale to Any Size</h3>
        <p>Allows for use in cases where the sample size or number of covariates is very large, making rerandomization practical for modern, large-scale experiments.</p>
      </div>
      
      <div class="feature animate-fade-in delay-200">
        <div class="feature-icon">
          <i class="fas fa-code-branch"></i>
        </div>
        <h3>Open-Source</h3>
        <p>Distributed under a 
          <a href="https://github.com/cjerzak/fastrerandomize-software?tab=License-1-ov-file#readme">GPL-3 license</a>, 
          fastrerandomize is developed and maintained publicly on 
          <a href="https://github.com/cjerzak/fastrerandomize-software?tab=readme-ov-file">GitHub</a>.
        </p>
      </div>
      
      <div class="feature animate-fade-in delay-300">
        <div class="feature-icon">
          <i class="fas fa-balance-scale"></i>
        </div>
        <h3>Balanced Assignment</h3>
        <p>Generates pools of acceptable randomizations based on a given acceptance probability, ensuring optimal covariate balance across treatment groups.</p>
      </div>
      
      <div class="feature animate-fade-in delay-400">
        <div class="feature-icon">
          <i class="fas fa-vial"></i>
        </div>
        <h3>Tests and Thresholds</h3>
        <p>Conducts exact rerandomization tests and computes optimal rerandomization acceptance thresholds for reliable statistical inference.</p>
      </div>
      
      <div class="feature animate-fade-in delay-500">
        <div class="feature-icon">
          <i class="fas fa-globe"></i>
        </div>
        <h3>Real-world Applications</h3>
        <p>Speed ups in applications to economic and geographical experiments, making complex designs accessible to practitioners.</p>
        <a href="tutorials.html">View applications <i class="fas fa-arrow-right"></i></a>
      </div>
    </section>
    
    <!-- Usage Example Section -->
    <section class="usage-example animate-fade-in">
      <h3>Example Use</h3>
      <div class="code-tabs">
        <button class="code-tab active" data-tab="tab1">Setup & Basic Usage</button>
        <button class="code-tab" data-tab="tab2">Monte Carlo Randomization</button>
        <button class="code-tab" data-tab="tab3">Randomization Test</button>
      </div>
      <div class="code-block active" id="tab1">
        <div class="code-content">
<span class="code-comment"># Step 1: Set up the environment</span>
<span class="code-keyword">library</span>(<span class="code-string">fastrerandomize</span>)

<span class="code-comment"># Build the backend with Python dependencies</span>
<span class="code-function">build_backend</span>(
  conda_env = <span class="code-string">"fastrerandomize"</span>, 
  conda = <span class="code-string">"auto"</span>
)

<span class="code-comment"># Step 2: Create some example covariate data</span>
<span class="code-keyword">set.seed</span>(999L)
n <- 1000
X <- <span class="code-keyword">matrix</span>(<span class="code-keyword">rnorm</span>(n * 5), n, 5)

<span class="code-comment"># Step 3: Generate balanced treatment assignments using the main function</span>
<span class="code-keyword">result</span> <- <span class="code-function">generate_randomizations</span>(
  n_units = n,
  n_treated = n/2,    <span class="code-comment"># Number of treated units (50%)</span>
  X = X,              <span class="code-comment"># Covariate matrix</span>
  randomization_accept_prob = 0.01,  <span class="code-comment"># Acceptance probability</span>
  randomization_type = <span class="code-string">"monte_carlo"</span>  <span class="code-comment"># Use Monte Carlo sampling</span>
)

<span class="code-comment"># Examine the results</span>
<span class="code-keyword">head</span>(result$randomizations)  <span class="code-comment"># Treatment assignments</span>
<span class="code-keyword">summary</span>(result$balance)      <span class="code-comment"># Balance statistics</span>
<span class="code-keyword">plot</span>(result)                 <span class="code-comment"># Plot distribution of balance measures</span>
        </div>
      </div>
      <div class="code-block" id="tab2">
        <div class="code-content">
<span class="code-comment"># Advanced Monte Carlo Batching</span>
<span class="code-keyword">library</span>(<span class="code-string">fastrerandomize</span>)

<span class="code-comment"># Create example data with many covariates</span>
<span class="code-keyword">set.seed</span>(42)
n <- 5000
p <- 20
X <- <span class="code-keyword">matrix</span>(<span class="code-keyword">rnorm</span>(n * p), n, p)

<span class="code-comment"># For large datasets, use monte_carlo explicitly</span>
<span class="code-keyword">result_mc</span> <- <span class="code-function">generate_randomizations_mc</span>(
  n_units = n,
  n_treated = n/2,
  X = X,
  randomization_accept_prob = 0.001,  <span class="code-comment"># Stricter balance criterion</span>
  max_draws = 1e6,       <span class="code-comment"># Maximum number of randomizations to draw</span>
  batch_size = 10000,    <span class="code-comment"># Process in batches for memory efficiency</span>
  approximate_inv = TRUE <span class="code-comment"># Use diagonal approximation for speed</span>
)

<span class="code-comment"># For faster computation with GPU acceleration</span>
<span class="code-comment"># Especially useful for large datasets</span>
<span class="code-keyword">gpu_result</span> <- <span class="code-function">generate_randomizations</span>(
  n_units = n,
  n_treated = n/2,
  X = X,
  randomization_accept_prob = 0.0001,  <span class="code-comment"># Very stringent</span>
  max_draws = 1e6,
  batch_size = 10000,
  randomization_type = <span class="code-string">"monte_carlo"</span>,
  verbose = TRUE        <span class="code-comment"># Show progress information</span>
)
        </div>
      </div>
      <div class="code-block" id="tab3">
        <div class="code-content">
<span class="code-comment"># Using the randomization test functionality</span>
<span class="code-keyword">library</span>(<span class="code-string">fastrerandomize</span>)

<span class="code-comment"># 1. Generate covariates</span>
<span class="code-keyword">set.seed</span>(123)
n <- 100
X <- <span class="code-keyword">matrix</span>(<span class="code-keyword">rnorm</span>(n * 3), n, 3)

<span class="code-comment"># 2. Generate candidate randomizations</span>
<span class="code-keyword">randomizations</span> <- <span class="code-function">generate_randomizations</span>(
  n_units = n,
  n_treated = n/2,
  X = X,
  randomization_accept_prob = 0.05,
  randomization_type = <span class="code-string">"monte_carlo"</span>,
  max_draws = 10000,
  batch_size = 1000
)

<span class="code-comment"># 3. Generate a simulated outcome with known effect</span>
<span class="code-keyword">obsW</span> <- randomizations$randomizations[1,]  <span class="code-comment"># Use first randomization</span>
<span class="code-keyword">true_effect</span> <- 0.5                        <span class="code-comment"># True treatment effect</span>
<span class="code-keyword">obsY</span> <- <span class="code-keyword">rnorm</span>(n) + obsW * true_effect

<span class="code-comment"># 4. Conduct randomization test</span>
<span class="code-keyword">test_result</span> <- <span class="code-function">randomization_test</span>(
  obsW = obsW,
  obsY = obsY,
  X = X,
  candidate_randomizations = randomizations$randomizations,
  findFI = TRUE,   <span class="code-comment"># Calculate fiducial interval</span>
  alpha = 0.05     <span class="code-comment"># Significance level</span>
)

<span class="code-comment"># 5. Examine test results</span>
<span class="code-keyword">print</span>(test_result)
<span class="code-keyword">plot</span>(test_result)  <span class="code-comment"># Visualize effect and fiducial interval</span>
        </div>
      </div>
    </section>

    <!-- Prior Work Section with citation -->
    <section class="prior-work animate-fade-in">
      <h3>Research & Citations</h3>
      <p>
        For more information, see the <a href="https://arxiv.org/abs/2501.07642">package paper</a>:
        Connor T. Jerzak, Rebecca Goldstein, Aniket Kamat, Fucheng Warren Zhu. "fastrerandomize: An R Package for Fast Rerandomization Using Accelerated Computing," 2025.
      </p>
    </section>

    <!-- Share Button -->
    <div class="share-container">
      <button id="share-button">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" 
             stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="18" cy="5" r="3"></circle>
          <circle cx="6" cy="12" r="3"></circle>
          <circle cx="18" cy="19" r="3"></circle>
          <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
          <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
        </svg>
        <strong>Share</strong>
      </button>
    </div>

    <!-- Demo Section -->
    <section class="demo-section">
      <h2>Try fastrerandomize:</h2>
      <iframe
        class="demo-frame"
        src="https://cjerzak-fastrerandomize.hf.space"
        frameborder="0"
        width="100%"
        height="500"
      ></iframe>
    </section>
    
  </main>

  <!-- Footer -->
  <footer>
    <div class="footer-content">
      <div class="footer-column">
        <h4>Documentation</h4>
        <ul class="footer-links">
          <li><a href="install.html">Installation Guide</a></li>
          <li><a href="https://github.com/cjerzak/fastrerandomize-software/blob/main/fastrerandomize.pdf?raw=true">API Reference</a></li>
          <li><a href="tutorials.html">Tutorials</a></li>
        </ul>
      </div>
      
      <div class="footer-column">
        <h4>Community</h4>
        <ul class="footer-links">
          <li><a href="https://github.com/cjerzak/fastrerandomize-software">GitHub</a></li>
          <li><a href="https://github.com/cjerzak/fastrerandomize-software/issues">Issue Tracker</a></li>
          <li><a href="https://cran.r-project.org/package=fastrerandomize">CRAN</a></li>
          <li><a href="https://github.com/cjerzak/fastrerandomize-software/commits/main/">Changelog</a></li>
        </ul>
      </div>
      
      <div class="footer-column">
        <h4>Resources</h4>
        <ul class="footer-links">
          <li><a href="https://arxiv.org/abs/2501.07642">Paper</a></li>
          <li><a href="https://connorjerzak.com/wp-content/uploads/2025/01/FastReandomizeBib.txt">How to Cite</a></li>
          <li><a href="figures/benchmarks.png">Benchmarks</a></li>
          <li><a href="examples.html">Examples</a></li>
        </ul>
      </div>
      
      <div class="footer-column">
        <h4>About</h4>
        <ul class="footer-links">
          <li><a href="aboutus.html">Team</a></li>
          <li><a href="mailto:connor.jerzak@austin.utexas.edu">Contact</a></li>
          <li><a href="https://github.com/cjerzak/fastrerandomize-software?tab=License-1-ov-file#readme">License</a></li>
        </ul>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>&copy; 2025 fastrerandomize developers. All rights reserved.</p>
    </div>
  </footer>

  <!-- Scripts -->
  <script>
    // MENU TOGGLE LOGIC
    const menuToggle = document.querySelector('.menu-toggle');
    const nav = document.querySelector('nav');

    menuToggle.addEventListener('click', () => {
      nav.classList.toggle('open');
    });

    // CODE TABS LOGIC
    const codeTabs = document.querySelectorAll('.code-tab');
    const codeBlocks = document.querySelectorAll('.code-block');
    
    codeTabs.forEach(tab => {
      tab.addEventListener('click', () => {
        // Remove active class from all tabs
        codeTabs.forEach(t => t.classList.remove('active'));
        // Add active class to clicked tab
        tab.classList.add('active');
        
        // Hide all code blocks
        codeBlocks.forEach(block => block.classList.remove('active'));
        // Show the selected code block
        document.getElementById(tab.dataset.tab).classList.add('active');
      });
    });

    // SHARE BUTTON LOGIC
    (function() {
      const shareBtn = document.getElementById('share-button');

      function showCopyNotification() {
        const notification = document.createElement('div');
        notification.innerText = 'Copied to clipboard';
        notification.style.position = 'fixed';
        notification.style.bottom = '20px';
        notification.style.right = '20px';
        notification.style.backgroundColor = 'rgba(0, 0, 0, 0.8)';
        notification.style.color = '#fff';
        notification.style.padding = '8px 12px';
        notification.style.borderRadius = '4px';
        notification.style.zIndex = '9999';
        document.body.appendChild(notification);

        setTimeout(() => {
          notification.remove();
        }, 2000);
      }

      shareBtn.addEventListener('click', function() {
        const currentURL = window.location.href;
        const pageTitle  = document.title || 'fastrerandomize - Fast Rerandomization Using Accelerated Computing';

        if (navigator.share) {
          navigator.share({
            title: pageTitle,
            text: 'Check out fastrerandomize - an R package for fast rerandomization using accelerated computing',
            url: currentURL
          })
          .catch((error) => {
            console.log('Sharing failed', error);
          });
        } else {
          if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(currentURL).then(() => {
              showCopyNotification();
            }, (err) => {
              console.error('Could not copy text: ', err);
            });
          } else {
            const textArea = document.createElement('textarea');
            textArea.value = currentURL;
            document.body.appendChild(textArea);
            textArea.select();
            try {
              document.execCommand('copy');
              showCopyNotification();
            } catch (err) {
              alert('Please copy this link:\n' + currentURL);
            }
            document.body.removeChild(textArea);
          }
        }
      });
    })();

    /*
      "Raining Vectors" Background - Enhanced Version
      ----------------------------------------------
      A more sophisticated version with color gradients and varying sizes
    */
    const canvas = document.getElementById('background-canvas');
    const ctx = canvas.getContext('2d');

    // Expanded set of mathy / vector / stats symbols
    const symbols = [
      '∂','∇','λ','α','δ','θ','Σ','∫','×','→','±','β','μ','Ω','σ','Φ',
      '∞','π','ξ','ζ','γ','ε','∛','∝','∠','∧','∨','∩','∪','≈','≠','≤','≥',
      '≡','∈','∉','⊂','⊃','⊆','⊇','⊕','⊗','⊥','Z','P','R','N'
    ];

    let width, height;
    let columns;       // Number of columns for the symbols
    let drops = [];    // Y positions for the symbols in each column
    let sizes = [];    // Font size for each column
    let speeds = [];   // Speed for each column
    let opacities = []; // Opacity for each column
    let hues = [];     // Hue for each column

    // Resize canvas
    function resizeCanvas() {
      width = window.innerWidth;
      height = window.innerHeight;
      canvas.width = width;
      canvas.height = height;

      columns = Math.floor(width / 20);  // 20px for each symbol
      
      // Reset all arrays
      drops = [];
      sizes = [];
      speeds = [];
      opacities = [];
      hues = [];
      
      for (let i = 0; i < columns; i++) {
        drops[i] = Math.random() * -100; // Start at different positions above the canvas
        sizes[i] = 12 + Math.floor(Math.random() * 12); // Font sizes between 12px and 24px
        speeds[i] = 0.1 + Math.random() * 0.3; // Different speeds
        opacities[i] = 0.1 + Math.random() * 0.3; // Different opacities
        hues[i] = 200 + Math.random() * 40; // Different hues in blue range
      }
    }

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    function draw() {
      // Semi-transparent background to give a trailing effect
      ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
      ctx.fillRect(0, 0, width, height);

      for (let i = 0; i < drops.length; i++) {
        // Pick a random symbol
        const text = symbols[Math.floor(Math.random() * symbols.length)];
        // x coordinate of the symbol
        const x = i * 20;
        // y coordinate is drops[i] * 20
        const y = drops[i] * 20;
        
        // Set font size
        ctx.font = `${sizes[i]}px monospace`;
        
        // Set color based on hue with saturation and lightness
        ctx.fillStyle = `hsla(${hues[i]}, 80%, 60%, ${opacities[i]})`;
        
        // Draw the symbol
        ctx.fillText(text, x, y);

        // Move drops down by their specific speed
        drops[i] += speeds[i];
        
        // Randomly reset when they go off screen
        if (y > height && Math.random() > 0.99) {
          drops[i] = -1;
          // Maybe change other properties when resetting
          speeds[i] = 0.1 + Math.random() * 0.3;
          opacities[i] = 0.1 + Math.random() * 0.3;
        }
      }
    }

    // Draw loop
    setInterval(draw, 33); // ~30fps for smoother animation

    /*
      Hero Animation - Randomization Visualization
      -------------------------------------------
      Visual representation of randomization algorithm
    */
    const heroCanvas = document.getElementById('hero-canvas');
    const heroCtx = heroCanvas.getContext('2d');
    
    let heroWidth, heroHeight;
    let points = [];
    const numPoints = 100;
    const groups = ['A', 'B']; // Treatment groups
    
    function resizeHeroCanvas() {
      const heroSection = document.querySelector('.hero');
      heroWidth = heroSection.offsetWidth;
      heroHeight = heroSection.offsetHeight;
      heroCanvas.width = heroWidth;
      heroCanvas.height = heroHeight;
      
      initPoints();
    }
    
    function initPoints() {
      points = [];
      
      // Create random points
      for (let i = 0; i < numPoints; i++) {
        points.push({
          x: Math.random() * heroWidth,
          y: Math.random() * heroHeight,
          radius: 2 + Math.random() * 2,
          group: null, // Initially no group
          targetX: null,
          targetY: null,
          speed: 0.02 + Math.random() * 0.04,
          progress: 0
        });
      }
    }
    
    function randomizePoints() {
      // Assign random groups
      points.forEach(point => {
        point.group = groups[Math.floor(Math.random() * groups.length)];
        point.progress = 0;
        
        // Set target positions based on group (group A on left, group B on right)
        if (point.group === 'A') {
          point.targetX = Math.random() * (heroWidth / 2 - 100);
          point.targetY = 100 + Math.random() * (heroHeight - 200);
        } else {
          point.targetX = (heroWidth / 2 + 100) + Math.random() * (heroWidth / 2 - 100);
          point.targetY = 100 + Math.random() * (heroHeight - 200);
        }
      });
    }
    
    function drawHeroAnimation() {
      heroCtx.clearRect(0, 0, heroWidth, heroHeight);
      
      // Draw connecting lines between points in same group
      heroCtx.beginPath();
      for (let i = 0; i < points.length; i++) {
        for (let j = i + 1; j < points.length; j++) {
          if (points[i].group === points[j].group) {
            const dx = points[i].x - points[j].x;
            const dy = points[i].y - points[j].y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            if (distance < 100) {
              heroCtx.moveTo(points[i].x, points[i].y);
              heroCtx.lineTo(points[j].x, points[j].y);
            }
          }
        }
      }
      
      heroCtx.strokeStyle = 'rgba(255, 255, 255, 0.05)';
      heroCtx.stroke();
      
      // Draw points
      points.forEach(point => {
        if (point.group) {
          // Update position if there's a target
          if (point.targetX !== null && point.progress < 1) {
            point.progress += point.speed;
            
            // Ease-in-out function
            const easeProgress = point.progress < 0.5
              ? 2 * point.progress * point.progress
              : -1 + (4 - 2 * point.progress) * point.progress;
            
            const startX = point.x;
            const startY = point.y;
            
            point.x = startX + (point.targetX - startX) * easeProgress;
            point.y = startY + (point.targetY - startY) * easeProgress;
          }
          
          heroCtx.beginPath();
          heroCtx.arc(point.x, point.y, point.radius, 0, Math.PI * 2);
          
          if (point.group === 'A') {
            heroCtx.fillStyle = 'rgba(59, 130, 246, 0.7)'; // Blue for group A
          } else {
            heroCtx.fillStyle = 'rgba(139, 92, 246, 0.7)'; // Purple for group B
          }
          
          heroCtx.fill();
        } else {
          // Points without groups
          heroCtx.beginPath();
          heroCtx.arc(point.x, point.y, point.radius, 0, Math.PI * 2);
          heroCtx.fillStyle = 'rgba(255, 255, 255, 0.3)';
          heroCtx.fill();
        }
      });
      
      // Check if all points have reached their targets
      const allSettled = points.every(point => !point.group || point.progress >= 1);
      
      if (allSettled) {
        // Wait a moment before re-randomizing
        setTimeout(randomizePoints, 2000);
      }
    }
    
    window.addEventListener('resize', resizeHeroCanvas);
    resizeHeroCanvas();
    
    // Start animation loop
    setInterval(drawHeroAnimation, 16); // ~60fps
    
    // Initial randomization after a delay
    setTimeout(randomizePoints, 1000);
    
    // Add scroll reveal animation for features
    window.addEventListener('scroll', revealOnScroll);
    
    function revealOnScroll() {
      const elements = document.querySelectorAll('.feature, .animate-fade-in');
      
      elements.forEach(element => {
        const elementTop = element.getBoundingClientRect().top;
        const elementBottom = element.getBoundingClientRect().bottom;
        
        // If element is in viewport
        if (elementTop < window.innerHeight - 50 && elementBottom > 0) {
          element.classList.add('visible');
          element.style.opacity = '1';
          element.style.transform = 'translateY(0)';
        }
      });
    }
    
    // Initial check for elements in view
    revealOnScroll();

    // SEARCH FUNCTIONALITY
    (function() {
      // Content to search through - this would ideally be generated from your page content
      const searchableContent = [
        {
          title: "Installation Guide",
          description: "How to install and set up fastrerandomize package",
          url: "install.html"
        },
        {
          title: "Documentation",
          description: "API reference and comprehensive documentation",
          url: "https://github.com/cjerzak/fastrerandomize-software/blob/main/fastrerandomize.pdf?raw=true"
        },
        {
          title: "Tutorials",
          description: "Step-by-step guides for using fastrerandomize",
          url: "tutorials.html"
        },
        {
          title: "Monte Carlo Randomization",
          description: "How to use Monte Carlo methods for randomization",
          url: "#tab2"
        },
        {
          title: "Randomization Test",
          description: "Performing statistical tests with rerandomization",
          url: "#tab3"
        },
        {
          title: "About Us",
          description: "Information about the developers and contributors",
          url: "aboutus.html"
        },
        {
          title: "GitHub Repository",
          description: "Source code and development resources",
          url: "https://github.com/cjerzak/fastrerandomize-software"
        },
        {
          title: "CRAN Package",
          description: "Official R package distribution",
          url: "https://cran.rstudio.com/web/packages/fastrerandomize/index.html"
        },
        {
          title: "GPU Acceleration",
          description: "Using GPU for faster computation",
          url: "#"
        },
        {
          title: "Benchmarks",
          description: "Performance comparisons and metrics",
          url: "benchmarks.html"
        }
      ];

      // DOM elements
      const searchInput = document.querySelector('.search-input');
      const nav = document.querySelector('nav');
      
      // Create search results container
      const searchResults = document.createElement('div');
      searchResults.className = 'search-results';
      
      // Add search results to the navigation
      const searchContainer = document.querySelector('.search-container');
      searchContainer.appendChild(searchResults);
      
      // Search function
      function performSearch(query) {
        // Clear previous results
        searchResults.innerHTML = '';
        
        if (!query.trim()) {
          searchResults.style.display = 'none';
          return;
        }
        
        // Convert query to lowercase for case-insensitive matching
        const lowercaseQuery = query.toLowerCase();
        
        // Filter content based on query
        const filteredResults = searchableContent.filter(item => {
          return (
            item.title.toLowerCase().includes(lowercaseQuery) ||
            item.description.toLowerCase().includes(lowercaseQuery)
          );
        });
        
        // Show or hide results container
        if (filteredResults.length > 0) {
          searchResults.style.display = 'block';
          
          // Create results HTML
          filteredResults.forEach(result => {
            const resultItem = document.createElement('a');
            resultItem.href = result.url;
            resultItem.className = 'search-result-item';
            
            resultItem.innerHTML = `
              <div style="font-weight: 600; margin-bottom: 0.25rem;">${result.title}</div>
              <div style="font-size: 0.85rem; color: rgba(255, 255, 255, 0.7);">${result.description}</div>
            `;
            
            searchResults.appendChild(resultItem);
          });
        } else {
          // Show "no results" message
          searchResults.style.display = 'block';
          searchResults.innerHTML = `
            <div style="padding: 1rem; color: rgba(255, 255, 255, 0.7); text-align: center;">
              No results found for "${query}"
            </div>
          `;
        }
      }
      
      // Event listeners
      searchInput.addEventListener('input', (e) => {
        performSearch(e.target.value);
      });
      
      searchInput.addEventListener('focus', () => {
        if (searchInput.value.trim()) {
          performSearch(searchInput.value);
        }
      });
      
      // Close search results when clicking outside
      document.addEventListener('click', (e) => {
        if (!searchContainer.contains(e.target)) {
          searchResults.style.display = 'none';
        }
      });
      
      // Handle form submission
      const searchForm = searchInput.closest('form');
      if (searchForm) {
        searchForm.addEventListener('submit', (e) => {
          e.preventDefault();
          performSearch(searchInput.value);
        });
      }
      
      // Add keyboard navigation for search results
      searchInput.addEventListener('keydown', (e) => {
        const results = searchResults.querySelectorAll('.search-result-item');
        
        if (results.length === 0) return;
        
        const activeElement = document.activeElement;
        const isResultFocused = activeElement.classList.contains('search-result-item');
        const currentIndex = isResultFocused ? 
          Array.from(results).indexOf(activeElement) : -1;
        
        // Down arrow
        if (e.key === 'ArrowDown') {
          e.preventDefault();
          if (currentIndex < results.length - 1) {
            results[currentIndex + 1].focus();
          } else {
            results[0].focus();
          }
        }
        
        // Up arrow
        else if (e.key === 'ArrowUp') {
          e.preventDefault();
          if (currentIndex > 0) {
            results[currentIndex - 1].focus();
          } else {
            results[results.length - 1].focus();
          }
        }
        
        // Escape key
        else if (e.key === 'Escape') {
          searchResults.style.display = 'none';
          searchInput.blur();
        }
      });
    })();
  </script>
</body>
</html>
